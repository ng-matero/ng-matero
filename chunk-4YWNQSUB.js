import{a as V,b as B,c as z}from"./chunk-QGACG2OQ.js";import{a as M,c as w,i as R}from"./chunk-YP3HU2SD.js";import{Cb as I,Ib as F,Oa as pe,Tb as G,fc as y,gc as j,hc as de,ic as H,jc as ue,q as ce,uc as E}from"./chunk-V2HHRRTI.js";import{Bc as D,Cc as O,Dc as N,Dd as le,Fc as S,Gc as f,Hb as ee,Ia as d,Ja as u,Ka as q,Kb as T,Mc as _,Nc as v,Pb as g,Ra as Q,Rb as te,Sc as W,Tb as ie,Xb as ne,_c as ae,ac as t,bc as o,cc as b,dd as me,gc as k,ha as L,jc as p,lc as oe,mc as re,na as K,nc as se,o as J,rb as a,sa as h,sb as X,wa as P,wc as U,xa as Z,xc as n,xd as C,yc as x}from"./chunk-7DGUKIOD.js";var he=(()=>{let e=class e{constructor(){this.rolesSrv=h(j),this.permissionsSrv=h(y),this.currentRole="",this.currentPermissions=[],this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new J}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(L(this._destroy$)).subscribe(m=>{console.log(m)}),this.permissionsSrv.permissions$.pipe(L(this._destroy$)).subscribe(m=>{console.log(m)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=P({type:e,selectors:[["app-permissions-role-switching"]],standalone:!0,features:[S],decls:26,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModelChange","change","ngModel"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(s,r){s&1&&(b(0,"page-header"),t(1,"p"),n(2," The permissions management is powered by "),t(3,"a",0)(4,"code"),n(5,"ngx-permissions"),o()(),n(6,`.
`),o(),t(7,"mat-card")(8,"mat-card-content")(9,"mat-button-toggle-group",1),N("ngModelChange",function(l){return O(r.currentRole,l)||(r.currentRole=l),l}),p("change",function(){return r.onPermissionChange()}),t(10,"mat-button-toggle",2),n(11,"ADMIN"),o(),t(12,"mat-button-toggle",3),n(13,"MANAGER"),o(),t(14,"mat-button-toggle",4),n(15,"GUEST"),o()(),t(16,"p"),n(17," Your current role: "),t(18,"code"),n(19),_(20,"json"),o()(),t(21,"p"),n(22," Your current permissions: "),t(23,"code"),n(24),_(25,"json"),o()()()()),s&2&&(a(9),D("ngModel",r.currentRole),a(10),x(v(20,3,r.currentRole)),a(5),x(v(25,5,r.currentPermissions)))},dependencies:[C,G,I,F,z,V,B,R,M,w,E]});let i=e;return i})();var xe=(()=>{let e=class e{constructor(){this.router=h(ce),this.rolesSrv=h(j),this.permissionsSrv=h(y),this.currentRole="",this.currentPermissions=[],this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=P({type:e,selectors:[["app-permissions-route-guard"]],standalone:!0,features:[S],decls:22,vars:7,consts:[[3,"ngModelChange","change","ngModel"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(s,r){s&1&&(b(0,"page-header"),t(1,"p"),n(2,` The route will be redirected to dashboard after change permission.
`),o(),t(3,"mat-card")(4,"mat-card-content")(5,"mat-button-toggle-group",0),N("ngModelChange",function(l){return O(r.currentRole,l)||(r.currentRole=l),l}),p("change",function(){return r.onPermissionChange()}),t(6,"mat-button-toggle",1),n(7,"ADMIN"),o(),t(8,"mat-button-toggle",2),n(9,"MANAGER"),o(),t(10,"mat-button-toggle",3),n(11,"GUEST"),o()(),t(12,"p"),n(13," Your current role: "),t(14,"code"),n(15),_(16,"json"),o()(),t(17,"p"),n(18," Your current permissions: "),t(19,"code"),n(20),_(21,"json"),o()()()()),s&2&&(a(5),D("ngModel",r.currentRole),a(10),x(v(16,3,r.currentRole)),a(5),x(v(21,5,r.currentPermissions)))},dependencies:[C,G,I,F,z,V,B,R,M,w,E]});let i=e;return i})();var Se=["*"];function Te(i,e){if(i&1){let ve=k();t(0,"div",0)(1,"button",1),p("click",function(){d(ve);let s=oe();return u(s._onClosed())}),q(),t(2,"svg",2),b(3,"path",3),o()()()}}var $=(()=>{let e=class e{get _hostClassList(){return`mtx-alert-${this.type} mat-elevation-z${this.elevation}`}constructor(m){this._changeDetectorRef=m,this.type="default",this.dismissible=!1,this.elevation=0,this.closed=new Q}_onClosed(){this._changeDetectorRef.markForCheck(),this.closed.emit(this)}};e.\u0275fac=function(s){return new(s||e)(X(ae))},e.\u0275cmp=P({type:e,selectors:[["mtx-alert"]],hostAttrs:["role","alert",1,"mtx-alert"],hostVars:4,hostBindings:function(s,r){s&2&&(ie(r._hostClassList),te("mtx-alert-dismissible",r.dismissible))},inputs:{type:"type",dismissible:[2,"dismissible","dismissible",me],elevation:"elevation"},outputs:{closed:"closed"},exportAs:["mtxAlert"],standalone:!0,features:[ee,S],ngContentSelectors:Se,decls:2,vars:1,consts:[[1,"mtx-alert-close"],["mat-icon-button","","type","button","aria-label","Close",3,"click"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false"],["d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"]],template:function(s,r){s&1&&(re(),se(0),T(1,Te,4,0,"div",0)),s&2&&(a(),ne(r.dismissible?1:-1))},dependencies:[pe],styles:[`.mtx-alert{position:relative;display:block;padding:.75rem 1rem;margin-bottom:1rem;line-height:1.5;border:1px solid var(--mtx-alert-outline-color, var(--mat-app-outline-variant));border-radius:var(--mtx-alert-container-shape, var(--mat-app-corner-small));background-color:var(--mtx-alert-background-color, var(--mat-app-surface-container));color:var(--mtx-alert-text-color, var(--mat-app-on-surface))}.mtx-alert.mtx-alert-info{border-color:var(--mtx-alert-info-outline-color);background-color:var(--mtx-alert-info-background-color);color:var(--mtx-alert-info-text-color)}.mtx-alert.mtx-alert-success{border-color:var(--mtx-alert-success-outline-color);background-color:var(--mtx-alert-success-background-color);color:var(--mtx-alert-success-text-color)}.mtx-alert.mtx-alert-warning{border-color:var(--mtx-alert-warning-outline-color);background-color:var(--mtx-alert-warning-background-color);color:var(--mtx-alert-warning-text-color)}.mtx-alert.mtx-alert-danger{border-color:var(--mtx-alert-danger-outline-color);background-color:var(--mtx-alert-danger-background-color);color:var(--mtx-alert-danger-text-color)}.mtx-alert-close{position:absolute;top:0;right:0;display:flex;align-items:center;justify-content:center;width:3rem;height:3rem}[dir=rtl] .mtx-alert-close{right:auto;left:0}.mtx-alert-dismissible{padding-right:3rem}
`],encapsulation:2,changeDetection:0});let i=e;return i})(),fe=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Z({type:e}),e.\u0275inj=K({imports:[le,$]});let i=e;return i})();var A=()=>["admin"],ye=()=>["guest"],Ee=()=>["adminnnnn"],Me=()=>[];function we(i,e){i&1&&(t(0,"p",11),n(1," I should see it only admin "),o())}function Re(i,e){i&1&&(t(0,"p",11),n(1," Usage on both only and except I should see it only admin "),o())}function Ae(i,e){i&1&&(t(0,"p",12),n(1,"I will see it only guest"),o())}function ke(i,e){i&1&&(t(0,"p",13),n(1,"I will see it except adminnnnn"),o())}function De(i,e){i&1&&(t(0,"p",14),n(1,"I should see it except admin"),o())}function Oe(i,e){i&1&&(t(0,"div"),n(1," Testing template "),o())}function Ne(i,e){i&1&&(t(0,"div"),n(1," Testing template "),o())}function Ie(i,e){i&1&&(t(0,"p",15),n(1,"else block"),o())}function Fe(i,e){i&1&&(t(0,"p",16),n(1,"then block"),o())}function Ge(i,e){i&1&&(t(0,"button"),n(1," This should be visible to admin or superadmin "),o())}function je(i,e){i&1&&(t(0,"button"),n(1,"WTF"),o())}var _e=(()=>{let e=class e{constructor(){this.permissionsSrv=h(y),this.comparedPermission=["guest"]}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((m,s)=>{setTimeout(()=>m(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=P({type:e,selectors:[["app-permissions-test"]],standalone:!0,features:[S],decls:41,vars:28,consts:[["a",""],["b",""],["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"permissionsAuthorized","permissionsUnauthorized","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],[4,"ngxPermissionsOnly"],[1,"bg-green-50","text-white"],[1,"bg-purple-50","text-white"],[1,"bg-orange-50","text-white"],[1,"bg-azure-50","text-white"],[1,"bg-azure-30","text-light"],[1,"bg-azure-90","text-dark"]],template:function(s,r){if(s&1){let c=k();b(0,"page-header"),t(1,"mat-card")(2,"mat-card-content")(3,"mtx-alert",2),n(4,"\u26A0\uFE0F The permissions check will delay 2s."),o(),t(5,"p")(6,"button",3),p("click",function(){return d(c),u(r.addPermission())}),n(7,"Add Permission [ admin ]"),o(),t(8,"button",3),p("click",function(){return d(c),u(r.removePermission())}),n(9,"Remove Permission [ admin ]"),o()(),T(10,we,2,0,"ng-template",4)(11,Re,2,0,"ng-template",5)(12,Ae,2,0,"ng-template",4)(13,ke,2,0,"ng-template",6),p("permissionsAuthorized",function(){return d(c),u(r.authorized())})("permissionsUnauthorized",function(){return d(c),u(r.unAuthorized())}),T(14,De,2,0,"ng-template",7)(15,Oe,2,0,"div",8)(16,Ne,2,0,"div",9)(17,Ie,2,0,"ng-template",null,0,W)(19,Fe,2,0,"ng-template",null,1,W),t(21,"p"),n(22," Compared permission: "),t(23,"code"),n(24),_(25,"json"),o()(),t(26,"div")(27,"button",3),p("click",function(){return d(c),u(r.changeToAdmin())}),n(28,"Change To Admin Permission"),o(),t(29,"button",3),p("click",function(){return d(c),u(r.changeToAnotherPermission())}),n(30,"Change To Awesome Permission"),o(),t(31,"button",3),p("click",function(){return d(c),u(r.changeToGuest())}),n(32,"Change To Guest Permission"),o()(),t(33,"div"),T(34,Ge,2,0,"button",10)(35,je,2,0,"button",10),o(),t(36,"p"),n(37," Your current permissions: "),t(38,"code"),n(39),_(40,"json"),o()()()()}if(s&2){let c=U(18),l=U(20);a(10),g("ngxPermissionsOnly",f(20,A)),a(),g("ngxPermissionsOnly",f(21,A))("ngxPermissionsExcept","hhhhh"),a(),g("ngxPermissionsOnly",f(22,ye)),a(),g("ngxPermissionsExcept",f(23,Ee)),a(),g("ngxPermissionsExcept",f(24,A)),a(),g("ngxPermissionsOnly",f(25,A))("ngxPermissionsOnlyElse",c)("ngxPermissionsOnlyThen",l),a(),g("ngxPermissionsExcept",f(26,A))("ngxPermissionsExceptElse",c)("ngxPermissionsExceptThen",l),a(8),x(v(25,16,r.comparedPermission)),a(10),g("ngxPermissionsOnly",r.comparedPermission),a(),g("ngxPermissionsOnly",f(27,Me)),a(4),x(v(40,18,r.getPermissions()))}},dependencies:[C,R,M,w,fe,$,ue,de,E]});let i=e;return i})();var Rt=[{path:"role-switching",component:he},{path:"route-guard",component:xe,canActivate:[H],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:_e,canActivate:[H],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];export{Rt as routes};
